<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runner V.074 - Modular</title>
    
    <!-- Stylesheets in order of dependency -->
<link rel="stylesheet" type="text/css" href="styles/main.css">
<link rel="stylesheet" type="text/css" href="styles/themes.css">
<link rel="stylesheet" type="text/css" href="styles/ui.css">
</head>
<body>
    <h1 class="logo">Raabe Studio</h1>
    
    <div id="gameContainer">
        <!-- Game UI Elements -->
        <div id="ui" class="ui-panel">
            <div>
                <span class="ui-label" id="scoreLabel">Score</span>
                <span class="ui-value" id="score">0</span>
            </div>
            <div>
                <span class="ui-label" id="levelLabel">Level</span>
                <span class="ui-value" id="level">1</span>
            </div>
            <div class="active-buffs" id="activeBuffs" style="display: none;"></div>
        </div>
        
        <div class="ui-panel bulletcount">
            <span class="bulletcountValue" id="bullets">0</span>
            <span class="ui-label" id="bulletsLabel">Bullets</span>
        </div>
        
        <div id="centerUI" class="ui-panel">
            <div class="ui-label" id="livesLabel">Lives</div>
            <div class="hearts-container" id="heartsContainer"></div>
        </div>
        
        <div id="muteButton" onclick="toggleMute()">
            <span id="muteIcon">üîä</span>
        </div>
        
        <div id="infoButton" onclick="toggleInfoOverlay()">
            <span>‚ÑπÔ∏è</span>
        </div>
        
        <div id="highscore" class="ui-panel">
            <div class="ui-label" id="highscoreLabel">High Score</div>
            <div class="ui-value" id="highscoreValue">0</div>
        </div>
        
        <!-- Main Game Canvas -->
        <canvas id="gameCanvas" width="800" height="500"></canvas>
        
        <!-- Theme Selection Screen -->
        <div id="themeSelection" class="screen dark-bg" style="display: block;">
            <h1 class="pulse">üéÆ Choose Your Adventure</h1>
            <div class="theme-selection-container fade-in">
                <div class="theme-card cowboy" onclick="selectTheme('cowboy')">
                    <div class="theme-preview">ü§†üèúÔ∏è‚ö°</div>
                    <div class="theme-title">Desert Cowboy</div>
                    <div class="theme-desc"> </div>
                </div>
                <div class="theme-card Dungeon" onclick="selectTheme('Dungeon')">
                    <div class="theme-preview">üßü‚Äç‚ôÇÔ∏è‚ö°ü¶á</div>
                    <div class="theme-title">Dungeon's Escape</div>
                    <div class="theme-desc"> </div>
                </div>
            </div>
        </div>
        
        <!-- Start Screen -->
        <div id="startScreen" class="screen dark-bg">
            <h1 id="gameTitle">ü§† Desert Cowboy Runner</h1>
            <div class="info-card">
                <h3 id="gameSubtitle" class="highlight"> </h3>
                <p id="gameDescription"></p>
                
                <div class="controls-grid">
                    <div class="control-item">
                        <span class="key">SPACE</span>
                        <span>Jump (hold for higher)</span>
                    </div>
                    <div class="control-item">
                        <span class="key">‚Üê</span><span class="key">‚Üí</span>
                        <span>Move left/right</span>
                    </div>
                    <div class="control-item">
                        <span class="key">S</span>
                        <span>Shoot</span>
                    </div>
                    <div class="control-item">
                        <span class="key">ESC</span>
                        <span>Pause</span>
                    </div>
                </div>
                
                <p id="gameInstructions">Avoid obstacles and shoot enemies for points!</p>
            </div>
            <button class="btn" onclick="startGame()" id="startButton">Start Adventure</button>
            <button class="btn btn-secondary btn-small back-btn" onclick="backToThemeSelection()">‚Üê Change Theme</button>
        </div>
        
        <!-- Level Complete Screen -->
        <div id="levelComplete" class="screen dark-bg">
            <div>
                <h3 id="buffChoiceTitle">Choose Your Buff:</h3>
                <div id="buffButtons"></div>
            </div>
        </div>
        
        <!-- Pause Screen -->
        <div id="pauseScreen" class="screen dark-bg">
            <button class="btn btn-secondary btn-small back-btn" onclick="backToThemeSelection()">‚Üê Change Theme</button>
            <div>
                <p>Game is paused. Press <span class="key">ESC</span> to resume.</p>
                <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr); margin: 16px 0;">
                    <div class="stat-card">
                        <div class="stat-label" id="pauseScoreLabel">Score</div>
                        <div class="stat-value" id="pauseScore">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label" id="pauseLevelLabel">Level</div>
                        <div class="stat-value" id="pauseLevel">1</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label" id="pauseLivesLabel">Lives</div>
                        <div class="stat-value" id="pauseLives">3</div>
                    </div>
                </div>
            </div>
            <button class="btn" onclick="resumeGame()">Resume Game</button>
            <button class="btn btn-danger" onclick="restartGame()">Restart</button>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameOver" class="screen dark-bg">
            <h2 id="gameOverTitle">üíÄ Game Over! üíÄ</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label" id="finalScoreLabel">Final Score</div>
                    <div class="stat-value" id="finalScore">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Levels Completed</div>
                    <div class="stat-value" id="levelsCompleted">0</div>
                </div>
            </div>
            <div id="newHighScore" style="display: none;">
                <h3 class="highlight pulse">üéâ NEW HIGH SCORE! üéâ</h3>
            </div>
            <button class="btn" onclick="restartGame()">Play Again</button>
            <button class="btn btn-secondary btn-small back-btn" onclick="backToThemeSelection()">‚Üê Change Theme</button>
            <p style="margin-top: 16px; font-size: 12px;">Press <span class="key">SPACE</span> to restart</p>
        </div>
        
        <!-- Info Overlay -->
        <div id="infoOverlay" class="screen dark-bg">
            <h2>üéÆ How to Play</h2>
            <div>
                <h3>üéØ Goal</h3>
                <p>Survive as long as possible by avoiding obstacles and shooting enemies. Complete levels to unlock powerful buffs!</p>
                
                <h3>üïπÔ∏è Controls</h3>
                <div class="controls-grid">
                    <div class="control-item">
                        <span class="key">SPACE</span>
                        <span>Jump (hold for higher jumps)</span>
                    </div>
                    <div class="control-item">
                        <span class="key">‚Üê</span><span class="key">‚Üí</span>
                        <span>Move left/right</span>
                    </div>
                    <div class="control-item">
                        <span class="key">S</span>
                        <span>Shoot bullets/bolts</span>
                    </div>
                    <div class="control-item">
                        <span class="key">ESC</span>
                        <span>Pause game</span>
                    </div>
                </div>
                
                <h3>‚öîÔ∏è Combat & Rewards</h3>
                <p><strong>Avoiding obstacles:</strong> +10 points each, +5 bullets every 10 avoided</p>
                <p><strong>Shooting enemies:</strong> Earn points based on enemy type, +1 life every 15 hits</p>
                <p><strong>Collecting boxes:</strong> +6 bullets/bolts instantly</p>
                
                <h3>üéÅ Leveling & Buffs</h3>
                <p><strong>Level progression:</strong> The further, the more rewarding</p>
                <p><strong>Buff levels:</strong> Every 2nd level, choose from 3 powerful upgrades:</p>
                <ul style="text-align: left; margin: 10px 0;">
                    <li><strong>Multi-Shot/Chain Lightning:</strong> Fire 3 projectiles at once</li>
                    <li><strong>Extra Life/Undead Vigor:</strong> Gain extra life every 10 (15) bullet hits </li>
                    <li><strong>Double Jump/Shadow Leap:</strong> Unlock aerial mobility</li>
                </ul>
                
                <h3>üí° Strategy Tips</h3>
                <p>‚Ä¢ Hold SPACE for higher jumps to clear tall obstacles</p>
                <p>‚Ä¢ Prioritize shooting over avoiding for better rewards</p>
                <p>‚Ä¢ Save bullets for tough enemies like bosses</p>
                <p>‚Ä¢ Choose buffs based on your playstyle and current needs</p>
            </div>
            <button class="btn" onclick="toggleInfoOverlay()">Got it!</button>
        </div>
    </div>
    
    <!-- Game Instructions -->
    <div id="instructions">
        <span id="instructionText">
            <span class="key">SPACE</span> to Jump ‚Ä¢ 
            <span class="key">S</span> to Shoot ‚Ä¢ 
            <span class="key">Arrows</span> to Move ‚Ä¢ 
            <span class="key">ESC</span> to Pause
        </span>
    </div>

    <!-- JavaScript modules in dependency order -->
    <script>
// Notfall-Namespace um kritische Fehler zu vermeiden
window.Game = {
    Manager: {
        performance: {
            log: function() { console.log('Performance log'); }
        }
    },
    Objects: {
        cleanup: function() { console.log('Objects cleanup'); }
    }
};

// Globale currentTheme Variable als Backup
window.currentTheme = 'cowboy';
</script>
    
    <!-- 1. Configuration (no dependencies) -->
    <script src="config/gameConfig.js"></script>
    <script src="config/themes.js"></script>
    
    <!-- 2. Core systems (depend on config) -->
    <script src="js/core/GameCache.js"></script>
    <script src="js/core/SoundManager.js"></script>
    <script src="js/core/GameState.js"></script>
    
    <!-- 3. Game systems (depend on core) -->
    <script src="js/systems/InputHandler.js"></script>
    <script src="js/systems/UIManager.js"></script>
    <script src="js/systems/ScreenManager.js"></script>
    
    <!-- 4. Game entities (depend on systems) -->
    <script src="js/entities/Player.js"></script>
    <script src="js/entities/Obstacle.js"></script>
    <script src="js/entities/Bullet.js"></script>
    <script src="js/entities/Effects.js"></script>
    
    <!-- 5. Rendering system (depends on entities) -->
    <script src="js/rendering/Renderer.js"></script>
    <script src="js/rendering/PlayerRenderer.js"></script>
    <script src="js/rendering/ObstacleRenderer.js"></script>
    <script src="js/rendering/EffectRenderer.js"></script>
    
    <!-- 6. Game logic (depends on all above) -->
    <script src="js/game/GameLogic.js"></script>
    <script src="js/game/CollisionSystem.js"></script>
    <script src="js/game/LevelSystem.js"></script>
    
    <!-- 7. Main initialization (depends on everything) -->
    <script src="js/main.js"></script>
</body>
</html>